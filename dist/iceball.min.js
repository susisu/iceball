/*!
 * iceball 0.0.0
 * copyright (c) 2015 Susisu | MIT License
 * https://github.com/susisu/iceball
 */
var iceball=function(e){function _(t){if(i[t])return i[t].exports;var u=i[t]={exports:{},id:t,loaded:!1};return e[t].call(u.exports,u,u.exports,_),u.loaded=!0,u.exports}var i={};return _.m=e,_.c=i,_.p="",_(0)}([function(e,_,i){"use strict";function t(){e.exports=Object.freeze({game:i(1),music:i(2)})}t()},function(e,_,i){"use strict";function t(){e.exports=Object.freeze({Game:u})}function u(e,_){Object.defineProperties(this,{__Game__music__:{writable:!0,value:e},__Game__threads__:{writable:!0,value:_.slice()},__Game__onTick__:{value:n.bind(this)}})}function n(e){this.__Game__threads__.forEach(function(e){e.advance()})}var o=i(2);u.prototype=Object.create(Object.prototype,{constructor:{writable:!0,configurable:!0,value:u},play:{writable:!0,configurable:!0,value:function(e){this.__Game__threads__.forEach(function(_){_.init(e)}),this.__Game__music__.addEventListener(o.MusicEvent.TICK,this.__Game__onTick__),this.__Game__music__.play(e)}},pause:{writable:!0,configurable:!0,value:function(){this.__Game__music__.removeEventListener(o.MusicEvent.TICK,this.__Game__onTick__),this.__Game__music__.pause()}}}),t()},function(e,_,i){"use strict";function t(){e.exports=Object.freeze({Music:u,MusicEvent:n,createWebAudioContext:o,WebAudioMusic:c})}function u(){l.EventDispatcher.call(this)}function n(e,_,i,t){l.Event.call(this,e,_,i),this.time=t}function o(){var e=a.AudioContext||a.webkitAudioContext;if(!e)throw new Error("Web Audio API is not supported");return new e}function c(e,_){u.call(this),Object.defineProperties(this,{__WebAudioMusic__context__:{value:e},__WebAudioMusic__buffer__:{value:_},__WebAudioMusic__fps__:{writable:!0,value:60},__WebAudioMusic__isPlaying__:{writable:!0,value:!1},__WebAudioMusic__source__:{writable:!0,value:null},__WebAudioMusic__timeOrigin__:{writable:!0,value:0},__WebAudioMusic__currentTime__:{writable:!0,value:0},__WebAudioMusic__intervalId__:{writable:!0,value:void 0},__WebAudioMusic__intervalCallback__:{value:r.bind(this)},__WebAudioMusic__onEnded__:{value:s.bind(this)}})}function s(){this.stop(),this.dispatchEvent(new n(n.ENDED,!1,!1,this.__WebAudioMusic__context__.currentTime-this.__WebAudioMusic__timeOrigin__))}function r(){for(var e=this.__WebAudioMusic__currentTime__,_=this.__WebAudioMusic__context__.currentTime-this.__WebAudioMusic__timeOrigin__;_>e;)this.dispatchEvent(new n(n.TICK,!1,!1,e)),e+=1/this.__WebAudioMusic__fps__;this.__WebAudioMusic__currentTime__=e}var a=i(3),l=i(4);u.prototype=Object.create(l.EventDispatcher.prototype,{constructor:{writable:!0,configurable:!0,value:u},start:{writable:!0,configurable:!0,value:function(e){}},stop:{writable:!0,configurable:!0,value:function(){}}}),Object.defineProperties(n,{TICK:{value:"tick"},ENDED:{value:"ended"}}),n.prototype=Object.create(l.Event.prototype,{constructor:{writable:!0,configurable:!0,value:n},toString:{writable:!0,configurable:!0,value:function(){return this.formatToString("MusicEvent",["type","bubbles","cancelable","time"])}},clone:{writable:!0,configurable:!0,value:function(){return new n(this.type,this.bubbles,this.cancelable,this.time)}}}),Object.defineProperties(c,{loadAudioData:{value:function(e,_,i){e.decodeAudioData(_,function(_){i.call(null,new c(e,_))})}}}),c.prototype=Object.create(l.EventDispatcher.prototype,{constructor:{writable:!0,configurable:!0,value:c},fps:{get:function(){return this.__WebAudioMusic__fps__},set:function(e){if(this.__WebAudioMusic__isPlaying__)throw new Error("FPS cannot be changed");this.__WebAudioMusic__fps__=e}},start:{writable:!0,configurable:!0,value:function(e){void 0===e&&(e=0),this.__WebAudioMusic__isPlaying__=!0;var _=this.__WebAudioMusic__context__.createBufferSource();this.__WebAudioMusic__source__=_,_.buffer=this.__WebAudioMusic__buffer__,_.connect(this.__WebAudioMusic__context__.destination),_.onended=this.__WebAudioMusic__onEnded__,_.start(this.__WebAudioMusic__context__.currentTime,e),this.__WebAudioMusic__timeOrigin__=this.__WebAudioMusic__context__.currentTime,this.__WebAudioMusic__currentTime__=0;var i=1e3/Math.max(this.__WebAudioMusic__fps__,60);this.__WebAudioMusic__intervalId__=a.setInterval(this.__WebAudioMusic__intervalCallback__,i)}},stop:{writable:!0,configurable:!0,value:function(){this.__WebAudioMusic__isPlaying__&&(this.__WebAudioMusic__isPlaying__=!1,this.__WebAudioMusic__source__.stop(),this.__WebAudioMusic__source__.onended=null,a.clearInterval(this.__WebAudioMusic__intervalId__),this.__WebAudioMusic__source__=null,this.__WebAudioMusic__intervalId__=void 0)}}}),t()},function(e,_){e.exports=window},function(e,_){e.exports=electronvolt}]);